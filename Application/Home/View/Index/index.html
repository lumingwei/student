<!DOCTYPE html>
<html lang="zh">
	<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>学生信息管理系统</title>
	<style type="text/css">
		body{
			background:url(Public/images/1.jpg)  no-repeat center center;
			background-size:cover;
			background-attachment:fixed;
			background-color:#CCCCCC;
		}
</style>
	</head>
	<body>
<div  style="text-align: center;">
	<p><font size="5">学生信息管理系统</font></p>
	用户名:&nbsp;<input type="text" placeholder="用户名" id="user_name"/><br/><br/>
	密码:&nbsp;<input type="text" placeholder="密码" id="password"/><br/>
	记住我<input type="checkbox" id="jizhu" value="1"><br/><br/>
	<button id="login">登　录</button>
	</div>
<script type="text/javascript" src="Public/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
	var jizhu=$("#jizhu").val();
	if(jizhu){
		$('input:checkbox').attr("checked", 'checked');
		var name = getCookie('user_name');
		var pass = getCookie('password');
		$("#user_name").val(name);
		$("#password").val(pass);
	}else{
		setCookie('user_name','');
		setCookie('password','');
	}
	function setCookie(name,value)
	{
		var Days = 30;
		var exp = new Date();
		exp.setTime(exp.getTime() + Days*24*60*60*1000);
		document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
	}
	function getCookie(name)
	{
		var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
		if(arr=document.cookie.match(reg))
			return unescape(arr[2]);
		else
			return null;
	}
	function check_login()
	{
	var jizhu1=$("#jizhu").val();
	 var name=$("#user_name").val();
	 var pass=$("#password").val();
	$.ajax({
		url: "{:U('index/login')}",
		type: 'get',
		// 设置的是请求参数
		data: { pwd: pass, name: name },
		// 用于设置响应体的类型 注意 跟 data 参数没关系！！！
		dataType: 'json',
		success: function (data) {
             if(data.status == 1){
				 if(jizhu1){
					 setCookie('user_name',name);
					 setCookie('password',pass);
				 }
				 window.location.href="{:U('index/admin_edit')}";
			 }else{
				 alert('账号或密码错误！');
			 }
		}
	})
	}
	$(function(){
		$("#login").click(function(){
			check_login();
			return false;
		})
	})
	</script>
</body>
</html>